{"ast":null,"code":"import React,{useState,useEffect,createContext,useContext}from'react';// --- Global Context for Cart Management ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();// --- Helper to format product data for Segment events ---\nconst formatProductForSegment=function(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;let position=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return{product_id:product.id,sku:product.sku,category:product.category,name:product.name,brand:product.brand,variant:product.variant,price:product.price,quantity:quantity,// coupon: product.coupon, // Add if coupons are implemented per product\nposition:position,url:`${window.location.origin}${window.location.pathname}#/product/${product.id}`,// Dynamic URL\nimage_url:product.imageUrl};};// --- Expanded Product Data ---\nconst products=[{id:'monopoly-3rd-edition',name:'Monopoly: 3rd Edition',description:'The classic board game of property trading, updated with new tokens and rules for the 3rd edition.',price:29.99,imageUrl:'https://placehold.co/300x300/F0F8FF/000000?text=Monopoly+3rd',category:'Games',sku:'GM-MONO-001',brand:'Hasbro',variant:'Standard'},{id:'uno-card-game',name:'Uno Card Game',description:'The timeless card game of matching colors and numbers. Easy to pick up, impossible to put down!',price:9.99,imageUrl:'https://placehold.co/300x300/E6E6FA/000000?text=Uno+Cards',category:'Games',sku:'GM-UNO-001',brand:'Mattel',variant:'Standard'},{id:'special-facial-soap',name:'Special Facial Soap',description:'Gentle and effective facial soap designed for all skin types, leaving your face feeling fresh and clean.',price:12.50,imageUrl:'https://placehold.co/300x300/F5F5DC/000000?text=Facial+Soap',category:'Beauty',sku:'BT-SOAP-001',brand:'PureSkin',variant:'Unscented'},{id:'fancy-hairbrush',name:'Fancy Hairbrush',description:'Ergonomically designed hairbrush with natural bristles for smooth, tangle-free hair.',price:18.00,imageUrl:'https://placehold.co/300x300/FFF0F5/000000?text=Hairbrush',category:'Beauty',sku:'BT-HBRUSH-001',brand:'GlamLocks',variant:'Large'},{id:'labubu-blind-box-series-8',name:'Labubu Blind Box Series 8',description:'Discover the magic of Labubu with a surprise figure from Series 8. Collect them all!',price:16.99,imageUrl:'https://placehold.co/300x300/ADD8E6/000000?text=Labubu+Series+8',category:'Collectible',sku:'COL-LABU-S8',brand:'Popmart',variant:'Blind Box'},{id:'labubu-ghost-hunter-plush',name:'Labubu Ghost Hunter Plush',description:'Cuddly Labubu plush in a spooky ghost hunter outfit. Perfect for fans and collectors.',price:25.00,imageUrl:'https://placehold.co/300x300/B0E0E6/000000?text=Labubu+Ghost',category:'Collectible',sku:'COL-LABU-GH',brand:'Popmart',variant:'Plush'},{id:'labubu-plush-keychain',name:'Labubu Plush Keychain',description:'Take Labubu with you everywhere with this adorable plush keychain. A small but mighty collectible.',price:9.50,imageUrl:'https://placehold.co/300x300/87CEEB/000000?text=Labubu+Keychain',category:'Collectible',sku:'COL-LABU-KC',brand:'Popmart',variant:'Keychain'},{id:'electric-pour-over-kettle',name:'Electric Pour-over Kettle',description:'Precision temperature control for the perfect pour-over coffee. Sleek design for any kitchen.',price:59.99,imageUrl:'https://placehold.co/300x300/6495ED/000000?text=Pour-over+Kettle',category:'Kitchen',sku:'KCH-KETTLE-001',brand:'BrewMaster',variant:'Black'},{id:'retro-gaming-mousepad',name:'Retro Gaming Mousepad',description:'Large mousepad with a nostalgic retro gaming design. Smooth surface for optimal mouse control.',price:14.99,imageUrl:'https://placehold.co/300x300/4682B4/000000?text=Retro+Mousepad',category:'Electronics',sku:'EL-MPAD-001',brand:'GameGear',variant:'Large'},{id:'airpods-pro-3rd-gen',name:'AirPods Pro 3rd Gen',description:'Immersive sound with active noise cancellation. The latest generation for superior audio experience.',price:249.00,imageUrl:'https://placehold.co/300x300/5F9EA0/000000?text=AirPods+Pro',category:'Electronics',sku:'EL-AIRPODS-003',brand:'Apple',variant:'Pro'},{id:'nintendo-switch-lite',name:'Nintendo Switch Lite',description:'Compact, lightweight Nintendo Switch system dedicated to handheld play. Perfect for gaming on the go.',price:199.99,imageUrl:'https://placehold.co/300x300/7FFFD4/000000?text=Switch+Lite',category:'Electronics',sku:'GM-SWITCHL-001',brand:'Nintendo',variant:'Yellow'},{id:'collectible-ceramic-mug',name:'Collectible Ceramic Mug',description:'High-quality ceramic mug with a unique design, perfect for collectors or daily use.',price:11.99,imageUrl:'https://placehold.co/300x300/AFEEEE/000000?text=Ceramic+Mug',category:'Collectible',sku:'COL-MUG-001',brand:'ArtisanCraft',variant:'Standard'},{id:'summer-splash-towel',name:'Summer Splash Towel',description:'Ultra-absorbent and quick-drying towel, ideal for beach days, pool parties, or gym sessions.',price:19.99,imageUrl:'https://placehold.co/300x300/00CED1/000000?text=Splash+Towel',category:'Home Goods',sku:'HG-TOWEL-001',brand:'AquaDry',variant:'Beach'},{id:'holiday-cookie-tin',name:'Holiday Cookie Tin',description:'A festive tin filled with an assortment of delicious holiday cookies. Great for gifting!',price:15.00,imageUrl:'https://placehold.co/300x300/40E0D0/000000?text=Cookie+Tin',category:'Food',sku:'FD-COOKIE-001',brand:'SweetTreats',variant:'Assorted'},{id:'wireless-pet-tracker',name:'Wireless Pet Tracker',description:'Keep track of your furry friend with this compact and reliable wireless pet tracker.',price:45.00,imageUrl:'https://placehold.co/300x300/20B2AA/000000?text=Pet+Tracker',category:'Pet Supplies',sku:'PET-TRACK-001',brand:'PetSafe',variant:'GPS'},{id:'smart-home-hub-mini',name:'Smart Home Hub Mini',description:'Centralize your smart home devices with this mini hub. Control lights, thermostats, and more.',price:79.99,imageUrl:'https://placehold.co/300x300/3CB371/000000?text=Smart+Hub',category:'Smart Home',sku:'SMART-HUB-001',brand:'ConnectHome',variant:'Mini'},{id:'mystery-snack-pack',name:'Mystery Snack Pack',description:'A surprise assortment of delicious and unique snacks from around the world. What will you get?',price:10.00,imageUrl:'https://placehold.co/300x300/98FB98/000000?text=Mystery+Snack',category:'Food',sku:'FD-SNACK-001',brand:'GlobalBites',variant:'Assorted'},{id:'stainless-steel-tumbler',name:'Stainless Steel Tumbler',description:'Double-walled insulated tumbler to keep your drinks hot or cold for hours. Perfect for on-the-go.',price:22.99,imageUrl:'https://placehold.co/300x300/ADFF2F/000000?text=Steel+Tumbler',category:'Home Goods',sku:'HG-TUMBLER-001',brand:'HydratePro',variant:'20oz'},{id:'rechargeable-hand-warmer',name:'Rechargeable Hand Warmer',description:'Stay warm in cold weather with this portable and rechargeable hand warmer. Reusable and eco-friendly.',price:28.00,imageUrl:'https://placehold.co/300x300/7CFC00/000000?text=Hand+Warmer',category:'Outdoor',sku:'OUT-HWARM-001',brand:'WarmHands',variant:'USB'},{id:'super-soft-throw-blanket',name:'Super Soft Throw Blanket',description:'Luxuriously soft throw blanket, perfect for cozying up on the couch or adding a touch of comfort to any room.',price:35.00,imageUrl:'https://placehold.co/300x300/00FF7F/000000?text=Throw+Blanket',category:'Home Goods',sku:'HG-BLANKET-001',brand:'CozyHome',variant:'Fleece'},{id:'labubu-golden-edition-figure',name:'Labubu Golden Edition Figure',description:'A rare and exclusive golden edition Labubu figure. A must-have for serious collectors!',price:49.99,imageUrl:'https://placehold.co/300x300/32CD32/000000?text=Labubu+Golden',category:'Collectible',sku:'COL-LABU-GOLD',brand:'Popmart',variant:'Golden'},{id:'wireless-earbuds-gen2',name:'Wireless Earbuds Gen2',description:'Second generation wireless earbuds with enhanced sound quality and longer battery life.',price:89.99,imageUrl:'https://placehold.co/300x300/228B22/000000?text=Earbuds+Gen2',category:'Electronics',sku:'EL-EARBUDS-002',brand:'AudioPro',variant:'Black'},{id:'led-desk-lamp-pro',name:'LED Desk Lamp Pro',description:'Adjustable LED desk lamp with multiple brightness and color temperature settings. Perfect for work or study.',price:49.00,imageUrl:'https://placehold.co/300x300/008000/000000?text=Desk+Lamp+Pro',category:'Home Office',sku:'HO-LAMP-001',brand:'BrightDesk',variant:'Pro'},{id:'ergonomic-office-chair',name:'Ergonomic Office Chair',description:'Comfortable and supportive office chair designed for long hours of work. Promotes good posture.',price:199.00,imageUrl:'https://placehold.co/300x300/006400/000000?text=Office+Chair',category:'Home Office',sku:'HO-OCHAIR-001',brand:'ErgoSit',variant:'Mesh'},{id:'bluetooth-speaker-splash',name:'Bluetooth Speaker Splash',description:'Waterproof portable Bluetooth speaker with powerful sound. Ideal for outdoor adventures.',price:65.00,imageUrl:'https://placehold.co/300x300/2E8B57/000000?text=Bluetooth+Speaker',category:'Electronics',sku:'EL-SPEAKER-001',brand:'SoundWave',variant:'Waterproof'},{id:'crystal-growing-kit',name:'Crystal Growing Kit',description:'Fun and educational kit for growing your own beautiful crystals. A great science project for kids.',price:20.00,imageUrl:'https://placehold.co/300x300/3CB371/000000?text=Crystal+Kit',category:'Toys & Hobbies',sku:'TH-CRYSTAL-001',brand:'ScienceFun',variant:'Large'},{id:'build-your-own-robot-kit',name:'Build-Your-Own Robot Kit',description:'Assemble your own functional robot with this engaging and educational kit. Learn about robotics.',price:75.00,imageUrl:'https://placehold.co/300x300/66CDAA/000000?text=Robot+Kit',category:'Toys & Hobbies',sku:'TH-ROBOT-001',brand:'RoboKids',variant:'Beginner'},{id:'color-changing-mug',name:'Color-Changing Mug',description:'Watch your mug transform as you pour in hot liquids! A magical addition to your morning routine.',price:14.00,imageUrl:'https://placehold.co/300x300/8FBC8F/000000?text=Color+Mug',category:'Home Goods',sku:'HG-MUG-001',brand:'MagicMugs',variant:'Heat Reveal'},{id:'fashion-face-mask-3-pack',name:'Fashion Face Mask (3-pack)',description:'Stylish and comfortable reusable face masks. Comes in a pack of three with assorted designs.',price:18.00,imageUrl:'https://placehold.co/300x300/90EE90/000000?text=Face+Masks',category:'Apparel',sku:'APP-MASK-001',brand:'StyleWear',variant:'Assorted'},{id:'mini-projector-hd',name:'Mini Projector HD',description:'Compact and portable HD projector for movies, presentations, or gaming on the go.',price:120.00,imageUrl:'https://placehold.co/300x300/9ACD32/000000?text=Mini+Projector',category:'Electronics',sku:'EL-PROJECTOR-001',brand:'ViewMax',variant:'HD'},{id:'doggo-deluxe-bed',name:'Doggo Deluxe Bed',description:'Plush and supportive bed for your beloved canine companion. Provides ultimate comfort.',price:55.00,imageUrl:'https://placehold.co/300x300/6B8E23/000000?text=Dog+Bed',category:'Pet Supplies',sku:'PET-DBED-001',brand:'ComfyPaws',variant:'Large'},{id:'cat-castle-tower',name:'Cat Castle Tower',description:'Multi-level cat tower with scratching posts, perches, and hideaways for endless feline fun.',price:85.00,imageUrl:'https://placehold.co/300x300/808000/000000?text=Cat+Tower',category:'Pet Supplies',sku:'PET-CTOWER-001',brand:'KittyKingdom',variant:'Multi-level'},{id:'all-season-yoga-mat',name:'All-Season Yoga Mat',description:'Durable and comfortable yoga mat suitable for all seasons and various types of workouts.',price:29.99,imageUrl:'https://placehold.co/300x300/BDB76B/000000?text=Yoga+Mat',category:'Sports & Fitness',sku:'SF-YOGA-001',brand:'ZenFit',variant:'Standard'},{id:'travel-packing-cubes',name:'Travel Packing Cubes',description:'Organize your luggage with these versatile packing cubes. Maximize space and minimize wrinkles.',price:24.99,imageUrl:'https://placehold.co/300x300/DAA520/000000?text=Packing+Cubes',category:'Travel',sku:'TRVL-PCUBE-001',brand:'PackSmart',variant:'Set of 3'},{id:'smart-plant-sensor',name:'Smart Plant Sensor',description:'Monitor your plant\\'s health with this smart sensor. Provides data on light, moisture, and nutrients.',price:39.99,imageUrl:'https://placehold.co/300x300/FFD700/000000?text=Plant+Sensor',category:'Smart Home',sku:'SMART-PLANT-001',brand:'GreenThumb',variant:'Basic'},{id:'pop-culture-puzzle-set',name:'Pop Culture Puzzle Set',description:'Challenging puzzle set featuring iconic pop culture references. Great for movie and TV enthusiasts.',price:22.00,imageUrl:'https://placehold.co/300x300/FFA500/000000?text=Pop+Puzzle',category:'Games',sku:'GM-PUZZLE-001',brand:'NerdPuzzles',variant:'1000pc'},{id:'classic-denim-jacket',name:'Classic Denim Jacket',description:'Timeless denim jacket, a versatile wardrobe staple for any season. Available in various washes.',price:69.00,imageUrl:'https://placehold.co/300x300/FF8C00/000000?text=Denim+Jacket',category:'Apparel',sku:'APP-DENIM-001',brand:'FashionCo',variant:'Blue'},{id:'pocket-blender-pro',name:'Pocket Blender Pro',description:'Compact and powerful personal blender, perfect for smoothies on the go. Rechargeable battery.',price:39.99,imageUrl:'https://placehold.co/300x300/FF4500/000000?text=Pocket+Blender',category:'Kitchen',sku:'KCH-PBLEND-001',brand:'BlendGo',variant:'Pro'},{id:'microfiber-cleaning-slippers',name:'Microfiber Cleaning Slippers',description:'Clean your floors effortlessly while you walk with these innovative microfiber cleaning slippers.',price:15.00,imageUrl:'https://placehold.co/300x300/FF6347/000000?text=Cleaning+Slippers',category:'Home Goods',sku:'HG-SLIPPER-001',brand:'CleanFeet',variant:'Grey'},{id:'personal-blender-bottle',name:'Personal Blender Bottle',description:'A convenient blender bottle for quick shakes and smoothies. Easy to clean and portable.',price:25.00,imageUrl:'https://placehold.co/300x300/CD5C5C/000000?text=Blender+Bottle',category:'Kitchen',sku:'KCH-BOTTLE-001',brand:'ShakeIt',variant:'24oz'},{id:'wireless-charging-pad',name:'Wireless Charging Pad',description:'Fast and efficient wireless charging pad for compatible smartphones and devices.',price:29.00,imageUrl:'https://placehold.co/300x300/DC143C/000000?text=Charging+Pad',category:'Electronics',sku:'EL-CHARGE-001',brand:'PowerUp',variant:'Fast'},{id:'kitchen-chef-knife-set',name:'Kitchen Chef Set',description:'Professional-grade chef knife set with essential knives for every culinary task. High-quality steel.',price:89.99,imageUrl:'https://placehold.co/300x300/B22222/000000?text=Knife+Set',category:'Kitchen',sku:'KCH-KNIFE-001',brand:'ChefPro',variant:'5-piece'},{id:'instant-cold-brew-maker',name:'Instant Cold Brew Maker',description:'Make delicious cold brew coffee at home in minutes with this easy-to-use instant maker.',price:34.99,imageUrl:'https://placehold.co/300x300/8B0000/000000?text=Cold+Brew+Maker',category:'Kitchen',sku:'KCH-COLDBREW-001',brand:'BrewQuick',variant:'Standard'},{id:'uv-sanitizing-box',name:'UV Sanitizing Box',description:'Sterilize your phone, keys, and other small items with powerful UV-C light. Keep germs at bay.',price:49.99,imageUrl:'https://placehold.co/300x300/A52A2A/000000?text=UV+Sanitizer',category:'Health & Personal Care',sku:'HPC-UVSAN-001',brand:'CleanTech',variant:'Compact'},{id:'portable-fire-pit',name:'Portable Fire Pit',description:'Enjoy cozy evenings outdoors with this compact and easy-to-assemble portable fire pit.',price:79.00,imageUrl:'https://placehold.co/300x300/D2B48C/000000?text=Fire+Pit',category:'Outdoor',sku:'OUT-FIREPIT-001',brand:'CampFire',variant:'Portable'},{id:'commuter-insulated-backpack',name:'Commuter Insulated Backpack',description:'Keep your food and drinks cool on the go with this stylish and insulated commuter backpack.',price:59.00,imageUrl:'https://placehold.co/300x300/F4A460/000000?text=Insulated+Backpack',category:'Travel',sku:'TRVL-BPACK-001',brand:'GoPack',variant:'Insulated'},{id:'labubu-vampire-bunny-plush',name:'Labubu Vampire Bunny Plush',description:'A special edition Labubu plush, dressed as a charming vampire bunny. Spooky and cute!',price:28.00,imageUrl:'https://placehold.co/300x300/FF7F50/000000?text=Labubu+Vampire',category:'Collectible',sku:'COL-LABU-VAMP',brand:'Popmart',variant:'Vampire'},{id:'labubu-sweet-dream-figure',name:'Labubu Sweet Dream Figure',description:'A delightful Labubu figure depicting a sweet dream scene. Perfect for display.',price:17.50,imageUrl:'https://placehold.co/300x300/FF69B4/000000?text=Labubu+Sweet+Dream',category:'Collectible',sku:'COL-LABU-SD',brand:'Popmart',variant:'Sweet Dream'},{id:'labubu-trick-or-treat-series',name:'Labubu Trick-or-Treat Series',description:'Get into the Halloween spirit with the Labubu Trick-or-Treat blind box series. Collect all the ghoulishly cute figures!',price:16.99,imageUrl:'https://placehold.co/300x300/FF1493/000000?text=Labubu+Trick',category:'Collectible',sku:'COL-LABU-TOT',brand:'Popmart',variant:'Halloween'},{id:'marvel-collector-keychain',name:'Marvel Collector Keychain',description:'Officially licensed Marvel collectible keychain. Choose your favorite superhero!',price:7.99,imageUrl:'https://placehold.co/300x300/C71585/000000?text=Marvel+Keychain',category:'Collectible',sku:'COL-MARVEL-KC',brand:'Marvel',variant:'Assorted'},{id:'holiday-advent-calendar',name:'Holiday Advent Calendar',description:'Count down to the holidays with a surprise treat or toy each day. A festive way to celebrate!',price:25.00,imageUrl:'https://placehold.co/300x300/DB7093/000000?text=Advent+Calendar',category:'Holiday',sku:'HOL-ADVENT-001',brand:'FestiveFun',variant:'Standard'}];// Define a subset of products for the \"Featured Products\" section on the Home Page\nconst featuredProducts=products.filter(product=>product.name.toLowerCase().includes('labubu')||product.category==='Collectible');// --- Components ---\nconst Header=_ref=>{let{navigate,cartItemCount}=_ref;return/*#__PURE__*/_jsx(\"header\",{className:\"bg-gradient-to-r from-purple-600 to-indigo-700 text-white p-4 shadow-md rounded-b-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold font-inter cursor-pointer\",onClick:()=>navigate('home'),children:\"Brandazon\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('home'),className:\"text-lg hover:text-purple-200 transition duration-300 ease-in-out transform hover:scale-105\",children:\"Home\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('products'),className:\"text-lg hover:text-purple-200 transition duration-300 ease-in-out transform hover:scale-105\",children:\"Products\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('simulatedSearch'),className:\"text-lg hover:text-purple-200 transition duration-300 ease-in-out transform hover:scale-105\",children:\"Simulate Ad\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('cart'),className:\"relative text-lg hover:text-purple-200 transition duration-300 ease-in-out transform hover:scale-105\",children:[\"Cart (\",cartItemCount,\")\",cartItemCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center\",children:cartItemCount})]})]})]})});};const PartnershipBanner=()=>{// Removed Promotion Viewed event from useEffect, now only triggered by click\nconst handleShopNowClick=()=>{// Promotion Clicked event\nif(window.analytics){window.analytics.track('Promotion Clicked',{promotion_id:'labubu_popmart_banner_top',creative:'labubu_x_popmart_banner',name:'Labubu x Popmart Exclusive Partnership',position:'home_banner_top'});}// In a real app, this would navigate to a specific Labubu category page or product list\n};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-pink-500 to-purple-600 text-white py-8 px-4 rounded-xl shadow-lg mb-12 text-center transform transition duration-500 hover:scale-102\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto flex flex-col md:flex-row items-center justify-center gap-6\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://placehold.co/150x150/FFFFFF/FF69B4?text=Labubu+x+Popmart\",alt:\"Labubu x Popmart Partnership\",className:\"w-32 h-32 object-contain rounded-full border-4 border-white shadow-md\",onError:e=>{e.target.onerror=null;e.target.src=`https://placehold.co/150x150/CCCCCC/000000?text=Partnership`;}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-4xl md:text-5xl font-extrabold mb-2 leading-tight\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block\",children:\"Brandazon x Labubu\"}),/*#__PURE__*/_jsx(\"span\",{className:\"block text-2xl md:text-3xl font-semibold mt-1\",children:\"Exclusive Partnership with Popmart!\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg md:text-xl font-medium opacity-90\",children:\"Discover the latest Labubu drops and limited editions, only here.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleShopNowClick,className:\"mt-6 bg-white text-purple-700 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-purple-100 hover:text-purple-800 transition duration-300 transform hover:scale-105\",children:\"Shop Labubu Now!\"})]})]})});};const ProductCard=_ref2=>{let{product,navigate,position}=_ref2;const{cart,setCart}=useContext(CartContext);const handleAddToCart=()=>{const existingItem=cart.find(item=>item.id===product.id);if(existingItem){setCart(cart.map(item=>item.id===product.id?{...item,quantity:item.quantity+1}:item));}else{setCart([...cart,{...product,quantity:1}]);}// Product Added event\nif(window.analytics){window.analytics.track('Product Added',{cart_id:'brandazon_cart_id',// Placeholder cart ID\nproducts:[formatProductForSegment(product,1)]// Always add 1 unit per click\n});}};const handleViewDetails=()=>{// Product Clicked event\nif(window.analytics){window.analytics.track('Product Clicked',formatProductForSegment(product,1,position));}// Product Viewed event - Triggered by button click, not just component mount\nif(window.analytics){window.analytics.track('Product Viewed',{product_id:product.id,sku:product.sku,category:product.category,name:product.name,brand:product.brand,variant:product.variant,price:product.price,quantity:1,currency:'USD',value:product.price,url:`${window.location.origin}${window.location.pathname}#/product/${product.id}`,image_url:product.imageUrl});}navigate('productDetail',product.id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-2xl flex flex-col\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name,className:\"w-full h-48 object-cover rounded-t-xl\",onError:e=>{e.target.onerror=null;e.target.src=`https://placehold.co/300x300/CCCCCC/000000?text=Image+Not+Found`;}}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 flex-grow flex flex-col justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-2\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-3 line-clamp-3\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-purple-700 mb-4\",children:[\"$\",product.price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleViewDetails,className:\"w-full bg-indigo-500 text-white py-2 px-4 rounded-lg hover:bg-indigo-600 transition duration-300 ease-in-out shadow-md hover:shadow-lg\",children:\"View Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,className:\"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 ease-in-out shadow-md hover:shadow-lg\",children:\"Add to Cart\"})]})]})]});};const HomePage=_ref3=>{let{navigate}=_ref3;// Removed Product List Viewed event from useEffect\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-6\",children:[/*#__PURE__*/_jsx(PartnershipBanner,{}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold text-gray-900 mb-8 text-center\",children:\"Featured Labubu & Popmart Collectibles\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\",children:featuredProducts.map((product,index)=>/*#__PURE__*/_jsx(ProductCard,{product:product,navigate:navigate,position:index+1},product.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-12\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('products'),className:\"bg-blue-600 text-white py-3 px-8 rounded-lg text-xl font-semibold hover:bg-blue-700 transition duration-300 ease-in-out shadow-lg hover:shadow-xl\",children:\"View All Products\"})})]});};const ProductsPage=_ref4=>{let{navigate}=_ref4;// Removed Product List Viewed event from useEffect\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold text-gray-900 mb-8 text-center\",children:\"All Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\",children:products.map((product,index)=>/*#__PURE__*/_jsx(ProductCard,{product:product,navigate:navigate,position:index+1},product.id))})]});};const ProductDetailPage=_ref5=>{let{productId,navigate}=_ref5;const[utmParams,setUtmParams]=useState(null);// Keep this state for UTMs\nconst{cart,setCart}=useContext(CartContext);const product=products.find(p=>p.id===productId);useEffect(()=>{// Campaign Attribution Recorded (if UTMs are present) - Now triggered by the ProductDetailPage loading\n// and checking for UTMs, which is a page-specific attribution, not a general \"track\" event on mount.\n// This is a special case where the \"track\" event is directly related to the URL state.\nif(window.analytics&&product){// Now parse UTMs from window.location.search (before the hash)\nconst queryString=window.location.search;const params=new URLSearchParams(queryString);const parsedUtm={};for(let[key,value]of params.entries()){if(key.startsWith('utm_')||key.startsWith('gad_')||key.startsWith('gclid')||key.startsWith('gbraid')){parsedUtm[key]=value;}}if(Object.keys(parsedUtm).length>0){setUtmParams(parsedUtm);// Update state with parsed UTMs\nwindow.analytics.track('Campaign Attribution Recorded',{product_id:product.id,product_name:product.name,...parsedUtm});}else{setUtmParams(null);// Clear if no UTMs are present\n}}},[productId,product]);// Depend on productId and product only for this effect\nif(!product){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-6 text-center text-red-600 text-xl font-semibold\",children:[\"Product not found!\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('products'),className:\"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out\",children:\"Back to Products\"})]});}const handleAddToCart=()=>{const existingItem=cart.find(item=>item.id===product.id);if(existingItem){setCart(cart.map(item=>item.id===product.id?{...item,quantity:item.quantity+1}:item));}else{setCart([...cart,{...product,quantity:1}]);}// Product Added event\nif(window.analytics){window.analytics.track('Product Added',{cart_id:'brandazon_cart_id',// Placeholder cart ID\nproducts:[formatProductForSegment(product,1)]});}};const handleRemoveFromCart=()=>{const existingItem=cart.find(item=>item.id===product.id);if(existingItem&&existingItem.quantity>1){setCart(cart.map(item=>item.id===product.id?{...item,quantity:item.quantity-1}:item));}else{setCart(cart.filter(item=>item.id!==product.id));}// Product Removed event\nif(window.analytics){window.analytics.track('Product Removed',{cart_id:'brandazon_cart_id',// Placeholder cart ID\nproducts:[formatProductForSegment(product,1)]// Always remove 1 unit per click\n});}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg overflow-hidden flex flex-col md:flex-row items-center p-8 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/2 flex justify-center\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name,className:\"w-full max-w-md h-auto object-contain rounded-lg shadow-md\",onError:e=>{e.target.onerror=null;e.target.src=`https://placehold.co/400x400/CCCCCC/000000?text=Image+Not+Found`;}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:w-1/2 flex flex-col justify-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold text-gray-900 mb-4\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 text-lg mb-6\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-5xl font-bold text-purple-700 mb-6\",children:[\"$\",product.price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,className:\"bg-purple-600 text-white py-3 px-6 rounded-lg text-xl font-semibold hover:bg-purple-700 transition duration-300 ease-in-out shadow-md hover:shadow-lg flex-grow\",children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRemoveFromCart,className:\"bg-red-500 text-white py-3 px-6 rounded-lg text-xl font-semibold hover:bg-red-600 transition duration-300 ease-in-out shadow-md hover:shadow-lg flex-grow\",children:\"Remove from Cart\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('products'),className:\"mt-4 bg-gray-200 text-gray-800 py-3 px-6 rounded-lg text-lg font-semibold hover:bg-gray-300 transition duration-300 ease-in-out shadow-md hover:shadow-lg\",children:\"\\u2190 Back to All Products\"}),utmParams&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 mb-2\",children:\"Campaign Attribution Details:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside text-blue-700\",children:Object.entries(utmParams).map(_ref6=>{let[key,value]=_ref6;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[key.replace('utm_','').replace('_',' '),\":\"]}),\" \",value]},key);})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-600 mt-2\",children:\"This information was captured from the URL query parameters.\"})]})]})]})});};const CartPage=_ref7=>{let{navigate}=_ref7;const{cart,setCart}=useContext(CartContext);const[showConfirmation,setShowConfirmation]=useState(false);// Calculate total price\nconst totalPrice=cart.reduce((sum,item)=>sum+item.price*item.quantity,0);const handleUpdateQuantity=(productId,delta)=>{const existingItem=cart.find(item=>item.id===productId);if(!existingItem)return;const newQuantity=existingItem.quantity+delta;if(newQuantity<=0){// Remove item if quantity goes to 0 or less\nsetCart(cart.filter(item=>item.id!==productId));if(window.analytics){window.analytics.track('Product Removed',{cart_id:'brandazon_cart_id',products:[formatProductForSegment(existingItem,1)]});}}else{setCart(cart.map(item=>item.id===productId?{...item,quantity:newQuantity}:item));// Product Added/Removed for quantity changes\nif(window.analytics){if(delta>0){window.analytics.track('Product Added',{cart_id:'brandazon_cart_id',products:[formatProductForSegment(existingItem,delta)]});}else{window.analytics.track('Product Removed',{cart_id:'brandazon_cart_id',products:[formatProductForSegment(existingItem,Math.abs(delta))]});}}}};const handleRemoveItem=productId=>{const itemToRemove=cart.find(item=>item.id===productId);if(itemToRemove){setCart(cart.filter(item=>item.id!==productId));// Product Removed event for full removal\nif(window.analytics){window.analytics.track('Product Removed',{cart_id:'brandazon_cart_id',products:[formatProductForSegment(itemToRemove,itemToRemove.quantity)]});}}};const handleCheckout=()=>{// Order Completed event\nif(window.analytics){window.analytics.track('Order Completed',{order_id:`order_${Date.now()}`,// Unique order ID\naffiliation:'Brandazon',total:totalPrice,revenue:totalPrice,shipping:0,// Assuming free shipping for simplicity\ntax:0,// Assuming no tax for simplicity\ndiscount:0,// Assuming no discount for simplicity\ncurrency:'USD',products:cart.map(item=>formatProductForSegment(item,item.quantity))});}setCart([]);// Clear cart after checkout\nsetShowConfirmation(true);// Show confirmation message\n};const handleCloseConfirmation=()=>{setShowConfirmation(false);navigate('home');// Go back to home after confirmation\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold text-gray-900 mb-8 text-center\",children:\"Your Shopping Cart\"}),cart.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-xl mb-4\",children:\"Your cart is empty.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('products'),className:\"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out\",children:\"Start Shopping\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6 mb-8\",children:cart.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between border-b pb-4 last:border-b-0 last:pb-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.imageUrl,alt:item.name,className:\"w-24 h-24 object-cover rounded-md shadow-sm\",onError:e=>{e.target.onerror=null;e.target.src=`https://placehold.co/96x96/CCCCCC/000000?text=Img`;}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"$\",item.price.toFixed(2),\" each\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center border border-gray-300 rounded-lg\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdateQuantity(item.id,-1),className:\"px-3 py-1 text-gray-700 hover:bg-gray-100 rounded-l-lg\",children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 border-x border-gray-300 text-gray-800\",children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdateQuantity(item.id,1),className:\"px-3 py-1 text-gray-700 hover:bg-gray-100 rounded-r-lg\",children:\"+\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold text-purple-700 w-24 text-right\",children:[\"$\",(item.price*item.quantity).toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveItem(item.id),className:\"text-red-500 hover:text-red-700 transition duration-300\",\"aria-label\":`Remove ${item.name}`,children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end items-center mt-8 pt-4 border-t-2 border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 mr-4\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-extrabold text-purple-800\",children:[\"$\",totalPrice.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckout,className:\"w-full mt-8 bg-green-600 text-white py-4 px-6 rounded-lg text-2xl font-semibold hover:bg-green-700 transition duration-300 ease-in-out shadow-lg hover:shadow-xl\",children:\"Proceed to Checkout\"})]}),showConfirmation&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-xl shadow-2xl text-center max-w-sm mx-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold text-green-700 mb-4\",children:\"Order Confirmed!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 text-lg mb-6\",children:\"Thank you for your purchase. Your order has been placed successfully.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseConfirmation,className:\"bg-blue-600 text-white py-2 px-5 rounded-lg text-lg font-semibold hover:bg-blue-700 transition duration-300\",children:\"Continue Shopping\"})]})})]});};const SimulatedSearchEnginePage=_ref8=>{let{navigate}=_ref8;const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[utmSource,setUtmSource]=useState('google');const[utmMedium,setUtmMedium]=useState('cpc');const[utmCampaign,setUtmCampaign]=useState('summer_sale');const handleSearch=()=>{if(searchTerm.trim()===''){setSearchResults([]);return;}const filtered=products.filter(p=>p.name.toLowerCase().includes(searchTerm.toLowerCase())||p.description.toLowerCase().includes(searchTerm.toLowerCase())||p.category.toLowerCase().includes(searchTerm.toLowerCase()));// Construct the base URL for the simulated ad\n// This assumes the app is hosted at a base path like /brandazon-ecommerce/\n// window.location.origin: e.g., https://bcaudillo.github.io\n// window.location.pathname: e.g., /brandazon-ecommerce/\nconst baseUrl=`${window.location.origin}${window.location.pathname}`;const resultsWithUrls=filtered.map(product=>{// Construct the URL with UTM parameters BEFORE the hash\nconst productUrl=`${baseUrl}?utm_source=${utmSource}&utm_medium=${utmMedium}&utm_campaign=${utmCampaign}#/product/${product.id}`;return{...product,simulatedUrl:productUrl};});setSearchResults(resultsWithUrls);// Search Results Viewed event\nif(window.analytics){window.analytics.track('Search Results Viewed',{query:searchTerm,results:filtered.map(p=>({product_id:p.id,product_name:p.name})),utm_source:utmSource,utm_medium:utmMedium,utm_campaign:utmCampaign});}};const handleAdClick=product=>{// Product Clicked event (simulating ad click)\nif(window.analytics){window.analytics.track('Product Clicked',{...formatProductForSegment(product),// Use existing formatter\nlist:'Simulated Search Results',position:searchResults.findIndex(p=>p.id===product.id)+1,// Add UTMs to the event if they were part of the clicked URL\nutm_source:utmSource,utm_medium:utmMedium,utm_campaign:utmCampaign});}// Simulate navigation by changing the URL hash only.\n// In a deployed environment, product.simulatedUrl would be used directly.\n// In Canvas (blob: URL), we can only change the hash to avoid SecurityError.\nconst productHash=`#/product/${product.id}`;window.history.pushState({},'',productHash);// Only push the hash part\nnavigate('productDetail',product.id);// This will trigger page call with current hash\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold text-gray-900 mb-8 text-center\",children:\"Simulate Search Engine Ad Click\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter search term (e.g., Labubu)\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 ease-in-out shadow-md\",children:\"Simulate Search\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"utmSource\",className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"UTM Source:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"utmSource\",value:utmSource,onChange:e=>setUtmSource(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"utmMedium\",className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"UTM Medium:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"utmMedium\",value:utmMedium,onChange:e=>setUtmMedium(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"utmCampaign\",className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"UTM Campaign:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"utmCampaign\",value:utmCampaign,onChange:e=>setUtmCampaign(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"})]})]})]}),searchResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"Simulated Search Results (Click to Simulate Ad)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:searchResults.map(product=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 border border-blue-200 hover:shadow-xl transition duration-300 cursor-pointer\",onClick:()=>handleAdClick(product),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name,className:\"w-20 h-20 object-cover rounded-md\",onError:e=>{e.target.onerror=null;e.target.src=`https://placehold.co/80x80/CCCCCC/000000?text=Img`;}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-semibold text-blue-700 hover:underline\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-700 mt-1\",children:[\"Ad: \",product.simulatedUrl]}),\" \"]})]})},product.id))})]})]});};// --- Main App Component ---\nfunction App(){const[currentPage,setCurrentPage]=useState('home');const[currentProductId,setCurrentProductId]=useState(null);const[cart,setCart]=useState([]);// Function to handle navigation and Segment page calls\nconst navigate=function(page){let productId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;setCurrentPage(page);setCurrentProductId(productId);let path='';let properties={};switch(page){case'home':path='/';properties={name:'Home Page'};// Product List Viewed event for Home Page (Featured Products)\nif(window.analytics){window.analytics.track('Product List Viewed',{category:'Featured Products',products:featuredProducts.map((p,index)=>formatProductForSegment(p,1,index+1))});}break;case'products':path='/products';properties={name:'All Products Page'};// Product List Viewed event for All Products Page\nif(window.analytics){window.analytics.track('Product List Viewed',{category:'All Products',products:products.map((p,index)=>formatProductForSegment(p,1,index+1))});}break;case'productDetail':path=`/product/${productId}`;const product=products.find(p=>p.id===productId);properties={name:'Product Detail Page',productId:productId,productName:product===null||product===void 0?void 0:product.name};break;case'cart':path='/cart';properties={name:'Shopping Cart Page'};// Cart Viewed event\nif(window.analytics){window.analytics.track('Cart Viewed',{cart_id:'brandazon_cart_id',// Placeholder cart ID\nproducts:cart.map(item=>formatProductForSegment(item,item.quantity))});}break;case'simulatedSearch':path='/simulated-search';properties={name:'Simulated Search Page'};break;default:path='/';properties={name:'Unknown Page'};}// Update URL hash for direct linking and browser history\n// In a blob: URL environment (like Canvas), history.pushState/replaceState cannot\n// change the pathname or origin. We must only modify the hash.\nconst newHash=`#${path}`;window.history.pushState({},'',newHash);// Segment Page call\nif(window.analytics){window.analytics.page(page,properties);}};// Effect to handle initial page load based on URL hash\nuseEffect(()=>{const handleHashChange=()=>{const hash=window.location.hash;if(hash.startsWith('#/product/')){const productId=hash.replace('#/product/','');setCurrentPage('productDetail');setCurrentProductId(productId);// Trigger Segment Page call for product detail on hash change\nconst product=products.find(p=>p.id===productId);if(window.analytics&&product){window.analytics.page('productDetail',{name:'Product Detail Page',productId:productId,productName:product.name});}}else if(hash==='#/products'){setCurrentPage('products');setCurrentProductId(null);// Trigger Segment Page call for all products on hash change\nif(window.analytics){window.analytics.page('products',{name:'All Products Page'});}}else if(hash==='#/cart'){setCurrentPage('cart');setCurrentProductId(null);// Trigger Segment Page call for cart on hash change\nif(window.analytics){window.analytics.page('cart',{name:'Shopping Cart Page'});}}else if(hash==='#/simulated-search'){setCurrentPage('simulatedSearch');setCurrentProductId(null);// Trigger Segment Page call for simulated search on hash change\nif(window.analytics){window.analytics.page('simulatedSearch',{name:'Simulated Search Page'});}}else{setCurrentPage('home');setCurrentProductId(null);// Trigger Segment Page call for home on hash change\nif(window.analytics){window.analytics.page('home',{name:'Home Page'});}}};// Initial load\nhandleHashChange();// Listen for hash changes\nwindow.addEventListener('hashchange',handleHashChange);return()=>window.removeEventListener('hashchange',handleHashChange);},[]);// Empty dependency array means this runs once on mount\n// Segment Identify and Page calls on initial load\nuseEffect(()=>{if(window.analytics){// Identify call (example user)\nwindow.analytics.identify('user-12345',{name:'John Doe',email:'john.doe@example.com',plan:'premium',// Example custom traits\nis_returning_customer:true,last_login_at:new Date().toISOString(),marketing_opt_in:true,lifetime_value:1250.75,// Demographic data (example)\nage:30,gender:'male',city:'San Francisco',country:'USA'});// Initial page load tracking based on current route\n// The navigate function already handles page calls, but this ensures initial load is caught\n// if the URL already has a hash on first app render.\nconst initialHash=window.location.hash;if(initialHash.startsWith('#/product/')){const productId=initialHash.replace('#/product/','');const product=products.find(p=>p.id===productId);window.analytics.page('productDetail',{name:'Product Detail Page',productId:productId,productName:product===null||product===void 0?void 0:product.name});}else if(initialHash==='#/products'){window.analytics.page('products',{name:'All Products Page'});}else if(initialHash==='#/cart'){window.analytics.page('cart',{name:'Shopping Cart Page'});}else if(initialHash==='#/simulated-search'){window.analytics.page('simulatedSearch',{name:'Simulated Search Page'});}else{window.analytics.page('home',{name:'Home Page'});}// Track Promotion Viewed for the banner on home page load\nwindow.analytics.track('Promotion Viewed',{promotion_id:'labubu_popmart_banner_top',creative:'labubu_x_popmart_banner',name:'Labubu x Popmart Exclusive Partnership',position:'home_banner_top'});// Track Product List Viewed for the featured products on home page load\nwindow.analytics.track('Product List Viewed',{category:'Featured Products',products:featuredProducts.map((p,index)=>formatProductForSegment(p,1,index+1))});}},[]);// Render the current page\nconst renderPage=()=>{switch(currentPage){case'home':return/*#__PURE__*/_jsx(HomePage,{navigate:navigate});case'products':return/*#__PURE__*/_jsx(ProductsPage,{navigate:navigate});case'productDetail':return/*#__PURE__*/_jsx(ProductDetailPage,{productId:currentProductId,navigate:navigate});case'cart':return/*#__PURE__*/_jsx(CartPage,{navigate:navigate});case'simulatedSearch':return/*#__PURE__*/_jsx(SimulatedSearchEnginePage,{navigate:navigate});default:return/*#__PURE__*/_jsx(HomePage,{navigate:navigate});}};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart,setCart},children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 font-inter antialiased\",children:[/*#__PURE__*/_jsx(\"script\",{src:\"https://cdn.tailwindcss.com\"}),/*#__PURE__*/_jsx(\"link\",{href:\"https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap\",rel:\"stylesheet\"}),/*#__PURE__*/_jsx(\"style\",{children:`\n            body {\n              font-family: 'Inter', sans-serif;\n            }\n          `}),/*#__PURE__*/_jsx(Header,{navigate:navigate,cartItemCount:cart.reduce((sum,item)=>sum+item.quantity,0)}),/*#__PURE__*/_jsx(\"main\",{className:\"py-8\",children:renderPage()})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","jsx","_jsx","jsxs","_jsxs","CartContext","formatProductForSegment","product","quantity","arguments","length","undefined","position","product_id","id","sku","category","name","brand","variant","price","url","window","location","origin","pathname","image_url","imageUrl","products","description","featuredProducts","filter","toLowerCase","includes","Header","_ref","navigate","cartItemCount","className","children","onClick","PartnershipBanner","handleShopNowClick","analytics","track","promotion_id","creative","src","alt","onError","e","target","onerror","ProductCard","_ref2","cart","setCart","handleAddToCart","existingItem","find","item","map","cart_id","handleViewDetails","currency","value","toFixed","HomePage","_ref3","index","ProductsPage","_ref4","ProductDetailPage","_ref5","productId","utmParams","setUtmParams","p","queryString","search","params","URLSearchParams","parsedUtm","key","entries","startsWith","Object","keys","product_name","handleRemoveFromCart","_ref6","replace","CartPage","_ref7","showConfirmation","setShowConfirmation","totalPrice","reduce","sum","handleUpdateQuantity","delta","newQuantity","Math","abs","handleRemoveItem","itemToRemove","handleCheckout","order_id","Date","now","affiliation","total","revenue","shipping","tax","discount","handleCloseConfirmation","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","SimulatedSearchEnginePage","_ref8","searchTerm","setSearchTerm","searchResults","setSearchResults","utmSource","setUtmSource","utmMedium","setUtmMedium","utmCampaign","setUtmCampaign","handleSearch","trim","filtered","baseUrl","resultsWithUrls","productUrl","simulatedUrl","query","results","utm_source","utm_medium","utm_campaign","handleAdClick","list","findIndex","productHash","history","pushState","type","placeholder","onChange","htmlFor","App","currentPage","setCurrentPage","currentProductId","setCurrentProductId","page","path","properties","productName","newHash","handleHashChange","hash","addEventListener","removeEventListener","identify","email","plan","is_returning_customer","last_login_at","toISOString","marketing_opt_in","lifetime_value","age","gender","city","country","initialHash","renderPage","Provider","href","rel"],"sources":["/Users/brandoncaudillo/Development/code/data_science/brandazon-ecommerce/src/app.jsx"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\n\n// --- Global Context for Cart Management ---\nconst CartContext = createContext();\n\n// --- Helper to format product data for Segment events ---\nconst formatProductForSegment = (product, quantity = 1, position = null) => {\n  return {\n    product_id: product.id,\n    sku: product.sku,\n    category: product.category,\n    name: product.name,\n    brand: product.brand,\n    variant: product.variant,\n    price: product.price,\n    quantity: quantity,\n    // coupon: product.coupon, // Add if coupons are implemented per product\n    position: position,\n    url: `${window.location.origin}${window.location.pathname}#/product/${product.id}`, // Dynamic URL\n    image_url: product.imageUrl,\n  };\n};\n\n// --- Expanded Product Data ---\nconst products = [\n  {\n    id: 'monopoly-3rd-edition',\n    name: 'Monopoly: 3rd Edition',\n    description: 'The classic board game of property trading, updated with new tokens and rules for the 3rd edition.',\n    price: 29.99,\n    imageUrl: 'https://placehold.co/300x300/F0F8FF/000000?text=Monopoly+3rd',\n    category: 'Games',\n    sku: 'GM-MONO-001',\n    brand: 'Hasbro',\n    variant: 'Standard'\n  },\n  {\n    id: 'uno-card-game',\n    name: 'Uno Card Game',\n    description: 'The timeless card game of matching colors and numbers. Easy to pick up, impossible to put down!',\n    price: 9.99,\n    imageUrl: 'https://placehold.co/300x300/E6E6FA/000000?text=Uno+Cards',\n    category: 'Games',\n    sku: 'GM-UNO-001',\n    brand: 'Mattel',\n    variant: 'Standard'\n  },\n  {\n    id: 'special-facial-soap',\n    name: 'Special Facial Soap',\n    description: 'Gentle and effective facial soap designed for all skin types, leaving your face feeling fresh and clean.',\n    price: 12.50,\n    imageUrl: 'https://placehold.co/300x300/F5F5DC/000000?text=Facial+Soap',\n    category: 'Beauty',\n    sku: 'BT-SOAP-001',\n    brand: 'PureSkin',\n    variant: 'Unscented'\n  },\n  {\n    id: 'fancy-hairbrush',\n    name: 'Fancy Hairbrush',\n    description: 'Ergonomically designed hairbrush with natural bristles for smooth, tangle-free hair.',\n    price: 18.00,\n    imageUrl: 'https://placehold.co/300x300/FFF0F5/000000?text=Hairbrush',\n    category: 'Beauty',\n    sku: 'BT-HBRUSH-001',\n    brand: 'GlamLocks',\n    variant: 'Large'\n  },\n  {\n    id: 'labubu-blind-box-series-8',\n    name: 'Labubu Blind Box Series 8',\n    description: 'Discover the magic of Labubu with a surprise figure from Series 8. Collect them all!',\n    price: 16.99,\n    imageUrl: 'https://placehold.co/300x300/ADD8E6/000000?text=Labubu+Series+8',\n    category: 'Collectible',\n    sku: 'COL-LABU-S8',\n    brand: 'Popmart',\n    variant: 'Blind Box'\n  },\n  {\n    id: 'labubu-ghost-hunter-plush',\n    name: 'Labubu Ghost Hunter Plush',\n    description: 'Cuddly Labubu plush in a spooky ghost hunter outfit. Perfect for fans and collectors.',\n    price: 25.00,\n    imageUrl: 'https://placehold.co/300x300/B0E0E6/000000?text=Labubu+Ghost',\n    category: 'Collectible',\n    sku: 'COL-LABU-GH',\n    brand: 'Popmart',\n    variant: 'Plush'\n  },\n  {\n    id: 'labubu-plush-keychain',\n    name: 'Labubu Plush Keychain',\n    description: 'Take Labubu with you everywhere with this adorable plush keychain. A small but mighty collectible.',\n    price: 9.50,\n    imageUrl: 'https://placehold.co/300x300/87CEEB/000000?text=Labubu+Keychain',\n    category: 'Collectible',\n    sku: 'COL-LABU-KC',\n    brand: 'Popmart',\n    variant: 'Keychain'\n  },\n  {\n    id: 'electric-pour-over-kettle',\n    name: 'Electric Pour-over Kettle',\n    description: 'Precision temperature control for the perfect pour-over coffee. Sleek design for any kitchen.',\n    price: 59.99,\n    imageUrl: 'https://placehold.co/300x300/6495ED/000000?text=Pour-over+Kettle',\n    category: 'Kitchen',\n    sku: 'KCH-KETTLE-001',\n    brand: 'BrewMaster',\n    variant: 'Black'\n  },\n  {\n    id: 'retro-gaming-mousepad',\n    name: 'Retro Gaming Mousepad',\n    description: 'Large mousepad with a nostalgic retro gaming design. Smooth surface for optimal mouse control.',\n    price: 14.99,\n    imageUrl: 'https://placehold.co/300x300/4682B4/000000?text=Retro+Mousepad',\n    category: 'Electronics',\n    sku: 'EL-MPAD-001',\n    brand: 'GameGear',\n    variant: 'Large'\n  },\n  {\n    id: 'airpods-pro-3rd-gen',\n    name: 'AirPods Pro 3rd Gen',\n    description: 'Immersive sound with active noise cancellation. The latest generation for superior audio experience.',\n    price: 249.00,\n    imageUrl: 'https://placehold.co/300x300/5F9EA0/000000?text=AirPods+Pro',\n    category: 'Electronics',\n    sku: 'EL-AIRPODS-003',\n    brand: 'Apple',\n    variant: 'Pro'\n  },\n  {\n    id: 'nintendo-switch-lite',\n    name: 'Nintendo Switch Lite',\n    description: 'Compact, lightweight Nintendo Switch system dedicated to handheld play. Perfect for gaming on the go.',\n    price: 199.99,\n    imageUrl: 'https://placehold.co/300x300/7FFFD4/000000?text=Switch+Lite',\n    category: 'Electronics',\n    sku: 'GM-SWITCHL-001',\n    brand: 'Nintendo',\n    variant: 'Yellow'\n  },\n  {\n    id: 'collectible-ceramic-mug',\n    name: 'Collectible Ceramic Mug',\n    description: 'High-quality ceramic mug with a unique design, perfect for collectors or daily use.',\n    price: 11.99,\n    imageUrl: 'https://placehold.co/300x300/AFEEEE/000000?text=Ceramic+Mug',\n    category: 'Collectible',\n    sku: 'COL-MUG-001',\n    brand: 'ArtisanCraft',\n    variant: 'Standard'\n  },\n  {\n    id: 'summer-splash-towel',\n    name: 'Summer Splash Towel',\n    description: 'Ultra-absorbent and quick-drying towel, ideal for beach days, pool parties, or gym sessions.',\n    price: 19.99,\n    imageUrl: 'https://placehold.co/300x300/00CED1/000000?text=Splash+Towel',\n    category: 'Home Goods',\n    sku: 'HG-TOWEL-001',\n    brand: 'AquaDry',\n    variant: 'Beach'\n  },\n  {\n    id: 'holiday-cookie-tin',\n    name: 'Holiday Cookie Tin',\n    description: 'A festive tin filled with an assortment of delicious holiday cookies. Great for gifting!',\n    price: 15.00,\n    imageUrl: 'https://placehold.co/300x300/40E0D0/000000?text=Cookie+Tin',\n    category: 'Food',\n    sku: 'FD-COOKIE-001',\n    brand: 'SweetTreats',\n    variant: 'Assorted'\n  },\n  {\n    id: 'wireless-pet-tracker',\n    name: 'Wireless Pet Tracker',\n    description: 'Keep track of your furry friend with this compact and reliable wireless pet tracker.',\n    price: 45.00,\n    imageUrl: 'https://placehold.co/300x300/20B2AA/000000?text=Pet+Tracker',\n    category: 'Pet Supplies',\n    sku: 'PET-TRACK-001',\n    brand: 'PetSafe',\n    variant: 'GPS'\n  },\n  {\n    id: 'smart-home-hub-mini',\n    name: 'Smart Home Hub Mini',\n    description: 'Centralize your smart home devices with this mini hub. Control lights, thermostats, and more.',\n    price: 79.99,\n    imageUrl: 'https://placehold.co/300x300/3CB371/000000?text=Smart+Hub',\n    category: 'Smart Home',\n    sku: 'SMART-HUB-001',\n    brand: 'ConnectHome',\n    variant: 'Mini'\n  },\n  {\n    id: 'mystery-snack-pack',\n    name: 'Mystery Snack Pack',\n    description: 'A surprise assortment of delicious and unique snacks from around the world. What will you get?',\n    price: 10.00,\n    imageUrl: 'https://placehold.co/300x300/98FB98/000000?text=Mystery+Snack',\n    category: 'Food',\n    sku: 'FD-SNACK-001',\n    brand: 'GlobalBites',\n    variant: 'Assorted'\n  },\n  {\n    id: 'stainless-steel-tumbler',\n    name: 'Stainless Steel Tumbler',\n    description: 'Double-walled insulated tumbler to keep your drinks hot or cold for hours. Perfect for on-the-go.',\n    price: 22.99,\n    imageUrl: 'https://placehold.co/300x300/ADFF2F/000000?text=Steel+Tumbler',\n    category: 'Home Goods',\n    sku: 'HG-TUMBLER-001',\n    brand: 'HydratePro',\n    variant: '20oz'\n  },\n  {\n    id: 'rechargeable-hand-warmer',\n    name: 'Rechargeable Hand Warmer',\n    description: 'Stay warm in cold weather with this portable and rechargeable hand warmer. Reusable and eco-friendly.',\n    price: 28.00,\n    imageUrl: 'https://placehold.co/300x300/7CFC00/000000?text=Hand+Warmer',\n    category: 'Outdoor',\n    sku: 'OUT-HWARM-001',\n    brand: 'WarmHands',\n    variant: 'USB'\n  },\n  {\n    id: 'super-soft-throw-blanket',\n    name: 'Super Soft Throw Blanket',\n    description: 'Luxuriously soft throw blanket, perfect for cozying up on the couch or adding a touch of comfort to any room.',\n    price: 35.00,\n    imageUrl: 'https://placehold.co/300x300/00FF7F/000000?text=Throw+Blanket',\n    category: 'Home Goods',\n    sku: 'HG-BLANKET-001',\n    brand: 'CozyHome',\n    variant: 'Fleece'\n  },\n  {\n    id: 'labubu-golden-edition-figure',\n    name: 'Labubu Golden Edition Figure',\n    description: 'A rare and exclusive golden edition Labubu figure. A must-have for serious collectors!',\n    price: 49.99,\n    imageUrl: 'https://placehold.co/300x300/32CD32/000000?text=Labubu+Golden',\n    category: 'Collectible',\n    sku: 'COL-LABU-GOLD',\n    brand: 'Popmart',\n    variant: 'Golden'\n  },\n  {\n    id: 'wireless-earbuds-gen2',\n    name: 'Wireless Earbuds Gen2',\n    description: 'Second generation wireless earbuds with enhanced sound quality and longer battery life.',\n    price: 89.99,\n    imageUrl: 'https://placehold.co/300x300/228B22/000000?text=Earbuds+Gen2',\n    category: 'Electronics',\n    sku: 'EL-EARBUDS-002',\n    brand: 'AudioPro',\n    variant: 'Black'\n  },\n  {\n    id: 'led-desk-lamp-pro',\n    name: 'LED Desk Lamp Pro',\n    description: 'Adjustable LED desk lamp with multiple brightness and color temperature settings. Perfect for work or study.',\n    price: 49.00,\n    imageUrl: 'https://placehold.co/300x300/008000/000000?text=Desk+Lamp+Pro',\n    category: 'Home Office',\n    sku: 'HO-LAMP-001',\n    brand: 'BrightDesk',\n    variant: 'Pro'\n  },\n  {\n    id: 'ergonomic-office-chair',\n    name: 'Ergonomic Office Chair',\n    description: 'Comfortable and supportive office chair designed for long hours of work. Promotes good posture.',\n    price: 199.00,\n    imageUrl: 'https://placehold.co/300x300/006400/000000?text=Office+Chair',\n    category: 'Home Office',\n    sku: 'HO-OCHAIR-001',\n    brand: 'ErgoSit',\n    variant: 'Mesh'\n  },\n  {\n    id: 'bluetooth-speaker-splash',\n    name: 'Bluetooth Speaker Splash',\n    description: 'Waterproof portable Bluetooth speaker with powerful sound. Ideal for outdoor adventures.',\n    price: 65.00,\n    imageUrl: 'https://placehold.co/300x300/2E8B57/000000?text=Bluetooth+Speaker',\n    category: 'Electronics',\n    sku: 'EL-SPEAKER-001',\n    brand: 'SoundWave',\n    variant: 'Waterproof'\n  },\n  {\n    id: 'crystal-growing-kit',\n    name: 'Crystal Growing Kit',\n    description: 'Fun and educational kit for growing your own beautiful crystals. A great science project for kids.',\n    price: 20.00,\n    imageUrl: 'https://placehold.co/300x300/3CB371/000000?text=Crystal+Kit',\n    category: 'Toys & Hobbies',\n    sku: 'TH-CRYSTAL-001',\n    brand: 'ScienceFun',\n    variant: 'Large'\n  },\n  {\n    id: 'build-your-own-robot-kit',\n    name: 'Build-Your-Own Robot Kit',\n    description: 'Assemble your own functional robot with this engaging and educational kit. Learn about robotics.',\n    price: 75.00,\n    imageUrl: 'https://placehold.co/300x300/66CDAA/000000?text=Robot+Kit',\n    category: 'Toys & Hobbies',\n    sku: 'TH-ROBOT-001',\n    brand: 'RoboKids',\n    variant: 'Beginner'\n  },\n  {\n    id: 'color-changing-mug',\n    name: 'Color-Changing Mug',\n    description: 'Watch your mug transform as you pour in hot liquids! A magical addition to your morning routine.',\n    price: 14.00,\n    imageUrl: 'https://placehold.co/300x300/8FBC8F/000000?text=Color+Mug',\n    category: 'Home Goods',\n    sku: 'HG-MUG-001',\n    brand: 'MagicMugs',\n    variant: 'Heat Reveal'\n  },\n  {\n    id: 'fashion-face-mask-3-pack',\n    name: 'Fashion Face Mask (3-pack)',\n    description: 'Stylish and comfortable reusable face masks. Comes in a pack of three with assorted designs.',\n    price: 18.00,\n    imageUrl: 'https://placehold.co/300x300/90EE90/000000?text=Face+Masks',\n    category: 'Apparel',\n    sku: 'APP-MASK-001',\n    brand: 'StyleWear',\n    variant: 'Assorted'\n  },\n  {\n    id: 'mini-projector-hd',\n    name: 'Mini Projector HD',\n    description: 'Compact and portable HD projector for movies, presentations, or gaming on the go.',\n    price: 120.00,\n    imageUrl: 'https://placehold.co/300x300/9ACD32/000000?text=Mini+Projector',\n    category: 'Electronics',\n    sku: 'EL-PROJECTOR-001',\n    brand: 'ViewMax',\n    variant: 'HD'\n  },\n  {\n    id: 'doggo-deluxe-bed',\n    name: 'Doggo Deluxe Bed',\n    description: 'Plush and supportive bed for your beloved canine companion. Provides ultimate comfort.',\n    price: 55.00,\n    imageUrl: 'https://placehold.co/300x300/6B8E23/000000?text=Dog+Bed',\n    category: 'Pet Supplies',\n    sku: 'PET-DBED-001',\n    brand: 'ComfyPaws',\n    variant: 'Large'\n  },\n  {\n    id: 'cat-castle-tower',\n    name: 'Cat Castle Tower',\n    description: 'Multi-level cat tower with scratching posts, perches, and hideaways for endless feline fun.',\n    price: 85.00,\n    imageUrl: 'https://placehold.co/300x300/808000/000000?text=Cat+Tower',\n    category: 'Pet Supplies',\n    sku: 'PET-CTOWER-001',\n    brand: 'KittyKingdom',\n    variant: 'Multi-level'\n  },\n  {\n    id: 'all-season-yoga-mat',\n    name: 'All-Season Yoga Mat',\n    description: 'Durable and comfortable yoga mat suitable for all seasons and various types of workouts.',\n    price: 29.99,\n    imageUrl: 'https://placehold.co/300x300/BDB76B/000000?text=Yoga+Mat',\n    category: 'Sports & Fitness',\n    sku: 'SF-YOGA-001',\n    brand: 'ZenFit',\n    variant: 'Standard'\n  },\n  {\n    id: 'travel-packing-cubes',\n    name: 'Travel Packing Cubes',\n    description: 'Organize your luggage with these versatile packing cubes. Maximize space and minimize wrinkles.',\n    price: 24.99,\n    imageUrl: 'https://placehold.co/300x300/DAA520/000000?text=Packing+Cubes',\n    category: 'Travel',\n    sku: 'TRVL-PCUBE-001',\n    brand: 'PackSmart',\n    variant: 'Set of 3'\n  },\n  {\n    id: 'smart-plant-sensor',\n    name: 'Smart Plant Sensor',\n    description: 'Monitor your plant\\'s health with this smart sensor. Provides data on light, moisture, and nutrients.',\n    price: 39.99,\n    imageUrl: 'https://placehold.co/300x300/FFD700/000000?text=Plant+Sensor',\n    category: 'Smart Home',\n    sku: 'SMART-PLANT-001',\n    brand: 'GreenThumb',\n    variant: 'Basic'\n  },\n  {\n    id: 'pop-culture-puzzle-set',\n    name: 'Pop Culture Puzzle Set',\n    description: 'Challenging puzzle set featuring iconic pop culture references. Great for movie and TV enthusiasts.',\n    price: 22.00,\n    imageUrl: 'https://placehold.co/300x300/FFA500/000000?text=Pop+Puzzle',\n    category: 'Games',\n    sku: 'GM-PUZZLE-001',\n    brand: 'NerdPuzzles',\n    variant: '1000pc'\n  },\n  {\n    id: 'classic-denim-jacket',\n    name: 'Classic Denim Jacket',\n    description: 'Timeless denim jacket, a versatile wardrobe staple for any season. Available in various washes.',\n    price: 69.00,\n    imageUrl: 'https://placehold.co/300x300/FF8C00/000000?text=Denim+Jacket',\n    category: 'Apparel',\n    sku: 'APP-DENIM-001',\n    brand: 'FashionCo',\n    variant: 'Blue'\n  },\n  {\n    id: 'pocket-blender-pro',\n    name: 'Pocket Blender Pro',\n    description: 'Compact and powerful personal blender, perfect for smoothies on the go. Rechargeable battery.',\n    price: 39.99,\n    imageUrl: 'https://placehold.co/300x300/FF4500/000000?text=Pocket+Blender',\n    category: 'Kitchen',\n    sku: 'KCH-PBLEND-001',\n    brand: 'BlendGo',\n    variant: 'Pro'\n  },\n  {\n    id: 'microfiber-cleaning-slippers',\n    name: 'Microfiber Cleaning Slippers',\n    description: 'Clean your floors effortlessly while you walk with these innovative microfiber cleaning slippers.',\n    price: 15.00,\n    imageUrl: 'https://placehold.co/300x300/FF6347/000000?text=Cleaning+Slippers',\n    category: 'Home Goods',\n    sku: 'HG-SLIPPER-001',\n    brand: 'CleanFeet',\n    variant: 'Grey'\n  },\n  {\n    id: 'personal-blender-bottle',\n    name: 'Personal Blender Bottle',\n    description: 'A convenient blender bottle for quick shakes and smoothies. Easy to clean and portable.',\n    price: 25.00,\n    imageUrl: 'https://placehold.co/300x300/CD5C5C/000000?text=Blender+Bottle',\n    category: 'Kitchen',\n    sku: 'KCH-BOTTLE-001',\n    brand: 'ShakeIt',\n    variant: '24oz'\n  },\n  {\n    id: 'wireless-charging-pad',\n    name: 'Wireless Charging Pad',\n    description: 'Fast and efficient wireless charging pad for compatible smartphones and devices.',\n    price: 29.00,\n    imageUrl: 'https://placehold.co/300x300/DC143C/000000?text=Charging+Pad',\n    category: 'Electronics',\n    sku: 'EL-CHARGE-001',\n    brand: 'PowerUp',\n    variant: 'Fast'\n  },\n  {\n    id: 'kitchen-chef-knife-set',\n    name: 'Kitchen Chef Set',\n    description: 'Professional-grade chef knife set with essential knives for every culinary task. High-quality steel.',\n    price: 89.99,\n    imageUrl: 'https://placehold.co/300x300/B22222/000000?text=Knife+Set',\n    category: 'Kitchen',\n    sku: 'KCH-KNIFE-001',\n    brand: 'ChefPro',\n    variant: '5-piece'\n  },\n  {\n    id: 'instant-cold-brew-maker',\n    name: 'Instant Cold Brew Maker',\n    description: 'Make delicious cold brew coffee at home in minutes with this easy-to-use instant maker.',\n    price: 34.99,\n    imageUrl: 'https://placehold.co/300x300/8B0000/000000?text=Cold+Brew+Maker',\n    category: 'Kitchen',\n    sku: 'KCH-COLDBREW-001',\n    brand: 'BrewQuick',\n    variant: 'Standard'\n  },\n  {\n    id: 'uv-sanitizing-box',\n    name: 'UV Sanitizing Box',\n    description: 'Sterilize your phone, keys, and other small items with powerful UV-C light. Keep germs at bay.',\n    price: 49.99,\n    imageUrl: 'https://placehold.co/300x300/A52A2A/000000?text=UV+Sanitizer',\n    category: 'Health & Personal Care',\n    sku: 'HPC-UVSAN-001',\n    brand: 'CleanTech',\n    variant: 'Compact'\n  },\n  {\n    id: 'portable-fire-pit',\n    name: 'Portable Fire Pit',\n    description: 'Enjoy cozy evenings outdoors with this compact and easy-to-assemble portable fire pit.',\n    price: 79.00,\n    imageUrl: 'https://placehold.co/300x300/D2B48C/000000?text=Fire+Pit',\n    category: 'Outdoor',\n    sku: 'OUT-FIREPIT-001',\n    brand: 'CampFire',\n    variant: 'Portable'\n  },\n  {\n    id: 'commuter-insulated-backpack',\n    name: 'Commuter Insulated Backpack',\n    description: 'Keep your food and drinks cool on the go with this stylish and insulated commuter backpack.',\n    price: 59.00,\n    imageUrl: 'https://placehold.co/300x300/F4A460/000000?text=Insulated+Backpack',\n    category: 'Travel',\n    sku: 'TRVL-BPACK-001',\n    brand: 'GoPack',\n    variant: 'Insulated'\n  },\n  {\n    id: 'labubu-vampire-bunny-plush',\n    name: 'Labubu Vampire Bunny Plush',\n    description: 'A special edition Labubu plush, dressed as a charming vampire bunny. Spooky and cute!',\n    price: 28.00,\n    imageUrl: 'https://placehold.co/300x300/FF7F50/000000?text=Labubu+Vampire',\n    category: 'Collectible',\n    sku: 'COL-LABU-VAMP',\n    brand: 'Popmart',\n    variant: 'Vampire'\n  },\n  {\n    id: 'labubu-sweet-dream-figure',\n    name: 'Labubu Sweet Dream Figure',\n    description: 'A delightful Labubu figure depicting a sweet dream scene. Perfect for display.',\n    price: 17.50,\n    imageUrl: 'https://placehold.co/300x300/FF69B4/000000?text=Labubu+Sweet+Dream',\n    category: 'Collectible',\n    sku: 'COL-LABU-SD',\n    brand: 'Popmart',\n    variant: 'Sweet Dream'\n  },\n  {\n    id: 'labubu-trick-or-treat-series',\n    name: 'Labubu Trick-or-Treat Series',\n    description: 'Get into the Halloween spirit with the Labubu Trick-or-Treat blind box series. Collect all the ghoulishly cute figures!',\n    price: 16.99,\n    imageUrl: 'https://placehold.co/300x300/FF1493/000000?text=Labubu+Trick',\n    category: 'Collectible',\n    sku: 'COL-LABU-TOT',\n    brand: 'Popmart',\n    variant: 'Halloween'\n  },\n  {\n    id: 'marvel-collector-keychain',\n    name: 'Marvel Collector Keychain',\n    description: 'Officially licensed Marvel collectible keychain. Choose your favorite superhero!',\n    price: 7.99,\n    imageUrl: 'https://placehold.co/300x300/C71585/000000?text=Marvel+Keychain',\n    category: 'Collectible',\n    sku: 'COL-MARVEL-KC',\n    brand: 'Marvel',\n    variant: 'Assorted'\n  },\n  {\n    id: 'holiday-advent-calendar',\n    name: 'Holiday Advent Calendar',\n    description: 'Count down to the holidays with a surprise treat or toy each day. A festive way to celebrate!',\n    price: 25.00,\n    imageUrl: 'https://placehold.co/300x300/DB7093/000000?text=Advent+Calendar',\n    category: 'Holiday',\n    sku: 'HOL-ADVENT-001',\n    brand: 'FestiveFun',\n    variant: 'Standard'\n  }\n];\n\n// Define a subset of products for the \"Featured Products\" section on the Home Page\nconst featuredProducts = products.filter(product =>\n  product.name.toLowerCase().includes('labubu') || product.category === 'Collectible'\n);\n\n\n// --- Components ---\n\nconst Header = ({ navigate, cartItemCount }) => {\n  return (\n    <header className=\"bg-gradient-to-r from-purple-600 to-indigo-700 text-white p-4 shadow-md rounded-b-lg\">\n      <div className=\"container mx-auto flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold font-inter cursor-pointer\" onClick={() => navigate('home')}>Brandazon</h1>\n        <nav className=\"flex items-center space-x-6\">\n          <button\n            onClick={() => navigate('home')}\n            className=\"text-lg hover:text-purple-200 transition duration-300 ease-in-out transform hover:scale-105\"\n          >\n            Home\n          </button>\n          <button\n            onClick={() => navigate('products')}\n            className=\"text-lg hover:text-purple-200 transition duration-300 ease-in-out transform hover:scale-105\"\n          >\n            Products\n          </button>\n          <button\n            onClick={() => navigate('simulatedSearch')}\n            className=\"text-lg hover:text-purple-200 transition duration-300 ease-in-out transform hover:scale-105\"\n          >\n            Simulate Ad\n          </button>\n          <button\n            onClick={() => navigate('cart')}\n            className=\"relative text-lg hover:text-purple-200 transition duration-300 ease-in-out transform hover:scale-105\"\n          >\n            Cart ({cartItemCount})\n            {cartItemCount > 0 && (\n              <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center\">\n                {cartItemCount}\n              </span>\n            )}\n          </button>\n        </nav>\n      </div>\n    </header>\n  );\n};\n\nconst PartnershipBanner = () => {\n  // Removed Promotion Viewed event from useEffect, now only triggered by click\n  const handleShopNowClick = () => {\n    // Promotion Clicked event\n    if (window.analytics) {\n      window.analytics.track('Promotion Clicked', {\n        promotion_id: 'labubu_popmart_banner_top',\n        creative: 'labubu_x_popmart_banner',\n        name: 'Labubu x Popmart Exclusive Partnership',\n        position: 'home_banner_top'\n      });\n    }\n    // In a real app, this would navigate to a specific Labubu category page or product list\n  };\n\n  return (\n    <div className=\"bg-gradient-to-r from-pink-500 to-purple-600 text-white py-8 px-4 rounded-xl shadow-lg mb-12 text-center transform transition duration-500 hover:scale-102\">\n      <div className=\"container mx-auto flex flex-col md:flex-row items-center justify-center gap-6\">\n        <img\n          src=\"https://placehold.co/150x150/FFFFFF/FF69B4?text=Labubu+x+Popmart\"\n          alt=\"Labubu x Popmart Partnership\"\n          className=\"w-32 h-32 object-contain rounded-full border-4 border-white shadow-md\"\n          onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/150x150/CCCCCC/000000?text=Partnership`; }}\n        />\n        <div>\n          <h2 className=\"text-4xl md:text-5xl font-extrabold mb-2 leading-tight\">\n            <span className=\"block\">Brandazon x Labubu</span>\n            <span className=\"block text-2xl md:text-3xl font-semibold mt-1\">Exclusive Partnership with Popmart!</span>\n          </h2>\n          <p className=\"text-lg md:text-xl font-medium opacity-90\">\n            Discover the latest Labubu drops and limited editions, only here.\n          </p>\n          <button\n            onClick={handleShopNowClick}\n            className=\"mt-6 bg-white text-purple-700 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-purple-100 hover:text-purple-800 transition duration-300 transform hover:scale-105\"\n          >\n            Shop Labubu Now!\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\nconst ProductCard = ({ product, navigate, position }) => {\n  const { cart, setCart } = useContext(CartContext);\n\n  const handleAddToCart = () => {\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem) {\n      setCart(cart.map(item =>\n        item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item\n      ));\n    } else {\n      setCart([...cart, { ...product, quantity: 1 }]);\n    }\n    // Product Added event\n    if (window.analytics) {\n      window.analytics.track('Product Added', {\n        cart_id: 'brandazon_cart_id', // Placeholder cart ID\n        products: [formatProductForSegment(product, 1)] // Always add 1 unit per click\n      });\n    }\n  };\n\n  const handleViewDetails = () => {\n    // Product Clicked event\n    if (window.analytics) {\n      window.analytics.track('Product Clicked', formatProductForSegment(product, 1, position));\n    }\n    // Product Viewed event - Triggered by button click, not just component mount\n    if (window.analytics) {\n      window.analytics.track('Product Viewed', {\n        product_id: product.id,\n        sku: product.sku,\n        category: product.category,\n        name: product.name,\n        brand: product.brand,\n        variant: product.variant,\n        price: product.price,\n        quantity: 1,\n        currency: 'USD',\n        value: product.price,\n        url: `${window.location.origin}${window.location.pathname}#/product/${product.id}`,\n        image_url: product.imageUrl,\n      });\n    }\n    navigate('productDetail', product.id);\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-2xl flex flex-col\">\n      <img\n        src={product.imageUrl}\n        alt={product.name}\n        className=\"w-full h-48 object-cover rounded-t-xl\"\n        onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/300x300/CCCCCC/000000?text=Image+Not+Found`; }}\n      />\n      <div className=\"p-5 flex-grow flex flex-col justify-between\">\n        <div>\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">{product.name}</h3>\n          <p className=\"text-gray-600 text-sm mb-3 line-clamp-3\">{product.description}</p>\n          <p className=\"text-2xl font-bold text-purple-700 mb-4\">${product.price.toFixed(2)}</p>\n        </div>\n        <div className=\"flex flex-col space-y-3\">\n          <button\n            onClick={handleViewDetails}\n            className=\"w-full bg-indigo-500 text-white py-2 px-4 rounded-lg hover:bg-indigo-600 transition duration-300 ease-in-out shadow-md hover:shadow-lg\"\n          >\n            View Details\n          </button>\n          <button\n            onClick={handleAddToCart}\n            className=\"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-300 ease-in-out shadow-md hover:shadow-lg\"\n          >\n            Add to Cart\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst HomePage = ({ navigate }) => {\n  // Removed Product List Viewed event from useEffect\n  return (\n    <div className=\"container mx-auto p-6\">\n      <PartnershipBanner />\n      <h2 className=\"text-4xl font-extrabold text-gray-900 mb-8 text-center\">Featured Labubu & Popmart Collectibles</h2>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n        {featuredProducts.map((product, index) => (\n          <ProductCard key={product.id} product={product} navigate={navigate} position={index + 1} />\n        ))}\n      </div>\n      <div className=\"text-center mt-12\">\n        <button\n          onClick={() => navigate('products')}\n          className=\"bg-blue-600 text-white py-3 px-8 rounded-lg text-xl font-semibold hover:bg-blue-700 transition duration-300 ease-in-out shadow-lg hover:shadow-xl\"\n        >\n          View All Products\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst ProductsPage = ({ navigate }) => {\n  // Removed Product List Viewed event from useEffect\n  return (\n    <div className=\"container mx-auto p-6\">\n      <h2 className=\"text-4xl font-extrabold text-gray-900 mb-8 text-center\">All Products</h2>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n        {products.map((product, index) => (\n          <ProductCard key={product.id} product={product} navigate={navigate} position={index + 1} />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst ProductDetailPage = ({ productId, navigate }) => {\n  const [utmParams, setUtmParams] = useState(null); // Keep this state for UTMs\n  const { cart, setCart } = useContext(CartContext);\n\n  const product = products.find(p => p.id === productId);\n\n  useEffect(() => {\n    // Campaign Attribution Recorded (if UTMs are present) - Now triggered by the ProductDetailPage loading\n    // and checking for UTMs, which is a page-specific attribution, not a general \"track\" event on mount.\n    // This is a special case where the \"track\" event is directly related to the URL state.\n    if (window.analytics && product) {\n      // Now parse UTMs from window.location.search (before the hash)\n      const queryString = window.location.search;\n      const params = new URLSearchParams(queryString);\n\n      const parsedUtm = {};\n      for (let [key, value] of params.entries()) {\n        if (key.startsWith('utm_') || key.startsWith('gad_') || key.startsWith('gclid') || key.startsWith('gbraid')) {\n          parsedUtm[key] = value;\n        }\n      }\n\n      if (Object.keys(parsedUtm).length > 0) {\n        setUtmParams(parsedUtm); // Update state with parsed UTMs\n        window.analytics.track('Campaign Attribution Recorded', {\n          product_id: product.id,\n          product_name: product.name,\n          ...parsedUtm\n        });\n      } else {\n        setUtmParams(null); // Clear if no UTMs are present\n      }\n    }\n  }, [productId, product]); // Depend on productId and product only for this effect\n\n  if (!product) {\n    return (\n      <div className=\"container mx-auto p-6 text-center text-red-600 text-xl font-semibold\">\n        Product not found!\n        <button\n          onClick={() => navigate('products')}\n          className=\"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out\"\n        >\n          Back to Products\n        </button>\n      </div>\n    );\n  }\n\n  const handleAddToCart = () => {\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem) {\n      setCart(cart.map(item =>\n        item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item\n      ));\n    } else {\n      setCart([...cart, { ...product, quantity: 1 }]);\n    }\n    // Product Added event\n    if (window.analytics) {\n      window.analytics.track('Product Added', {\n        cart_id: 'brandazon_cart_id', // Placeholder cart ID\n        products: [formatProductForSegment(product, 1)]\n      });\n    }\n  };\n\n  const handleRemoveFromCart = () => {\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem && existingItem.quantity > 1) {\n      setCart(cart.map(item =>\n        item.id === product.id ? { ...item, quantity: item.quantity - 1 } : item\n      ));\n    } else {\n      setCart(cart.filter(item => item.id !== product.id));\n    }\n    // Product Removed event\n    if (window.analytics) {\n      window.analytics.track('Product Removed', {\n        cart_id: 'brandazon_cart_id', // Placeholder cart ID\n        products: [formatProductForSegment(product, 1)] // Always remove 1 unit per click\n      });\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <div className=\"bg-white rounded-xl shadow-lg overflow-hidden flex flex-col md:flex-row items-center p-8 gap-8\">\n        <div className=\"md:w-1/2 flex justify-center\">\n          <img\n            src={product.imageUrl}\n            alt={product.name}\n            className=\"w-full max-w-md h-auto object-contain rounded-lg shadow-md\"\n            onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/400x400/CCCCCC/000000?text=Image+Not+Found`; }}\n          />\n        </div>\n        <div className=\"md:w-1/2 flex flex-col justify-center\">\n          <h2 className=\"text-4xl font-extrabold text-gray-900 mb-4\">{product.name}</h2>\n          <p className=\"text-gray-700 text-lg mb-6\">{product.description}</p>\n          <p className=\"text-5xl font-bold text-purple-700 mb-6\">${product.price.toFixed(2)}</p>\n\n          <div className=\"flex space-x-4 mb-6\">\n            <button\n              onClick={handleAddToCart}\n              className=\"bg-purple-600 text-white py-3 px-6 rounded-lg text-xl font-semibold hover:bg-purple-700 transition duration-300 ease-in-out shadow-md hover:shadow-lg flex-grow\"\n            >\n              Add to Cart\n            </button>\n            <button\n              onClick={handleRemoveFromCart}\n              className=\"bg-red-500 text-white py-3 px-6 rounded-lg text-xl font-semibold hover:bg-red-600 transition duration-300 ease-in-out shadow-md hover:shadow-lg flex-grow\"\n            >\n              Remove from Cart\n            </button>\n          </div>\n\n          <button\n            onClick={() => navigate('products')}\n            className=\"mt-4 bg-gray-200 text-gray-800 py-3 px-6 rounded-lg text-lg font-semibold hover:bg-gray-300 transition duration-300 ease-in-out shadow-md hover:shadow-lg\"\n          >\n            ← Back to All Products\n          </button>\n\n          {utmParams && (\n            <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n              <h3 className=\"text-lg font-semibold text-blue-800 mb-2\">Campaign Attribution Details:</h3>\n              <ul className=\"list-disc list-inside text-blue-700\">\n                {Object.entries(utmParams).map(([key, value]) => (\n                  <li key={key}><strong>{key.replace('utm_', '').replace('_', ' ')}:</strong> {value}</li>\n                ))}\n              </ul>\n              <p className=\"text-sm text-blue-600 mt-2\">\n                This information was captured from the URL query parameters.\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst CartPage = ({ navigate }) => {\n  const { cart, setCart } = useContext(CartContext);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  // Calculate total price\n  const totalPrice = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\n\n  const handleUpdateQuantity = (productId, delta) => {\n    const existingItem = cart.find(item => item.id === productId);\n    if (!existingItem) return;\n\n    const newQuantity = existingItem.quantity + delta;\n\n    if (newQuantity <= 0) {\n      // Remove item if quantity goes to 0 or less\n      setCart(cart.filter(item => item.id !== productId));\n      if (window.analytics) {\n        window.analytics.track('Product Removed', {\n          cart_id: 'brandazon_cart_id',\n          products: [formatProductForSegment(existingItem, 1)]\n        });\n      }\n    } else {\n      setCart(cart.map(item =>\n        item.id === productId ? { ...item, quantity: newQuantity } : item\n      ));\n      // Product Added/Removed for quantity changes\n      if (window.analytics) {\n        if (delta > 0) {\n          window.analytics.track('Product Added', {\n            cart_id: 'brandazon_cart_id',\n            products: [formatProductForSegment(existingItem, delta)]\n          });\n        } else {\n          window.analytics.track('Product Removed', {\n            cart_id: 'brandazon_cart_id',\n            products: [formatProductForSegment(existingItem, Math.abs(delta))]\n          });\n        }\n      }\n    }\n  };\n\n  const handleRemoveItem = (productId) => {\n    const itemToRemove = cart.find(item => item.id === productId);\n    if (itemToRemove) {\n      setCart(cart.filter(item => item.id !== productId));\n      // Product Removed event for full removal\n      if (window.analytics) {\n        window.analytics.track('Product Removed', {\n          cart_id: 'brandazon_cart_id',\n          products: [formatProductForSegment(itemToRemove, itemToRemove.quantity)]\n        });\n      }\n    }\n  };\n\n  const handleCheckout = () => {\n    // Order Completed event\n    if (window.analytics) {\n      window.analytics.track('Order Completed', {\n        order_id: `order_${Date.now()}`, // Unique order ID\n        affiliation: 'Brandazon',\n        total: totalPrice,\n        revenue: totalPrice,\n        shipping: 0, // Assuming free shipping for simplicity\n        tax: 0, // Assuming no tax for simplicity\n        discount: 0, // Assuming no discount for simplicity\n        currency: 'USD',\n        products: cart.map(item => formatProductForSegment(item, item.quantity))\n      });\n    }\n    setCart([]); // Clear cart after checkout\n    setShowConfirmation(true); // Show confirmation message\n  };\n\n  const handleCloseConfirmation = () => {\n    setShowConfirmation(false);\n    navigate('home'); // Go back to home after confirmation\n  };\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <h2 className=\"text-4xl font-extrabold text-gray-900 mb-8 text-center\">Your Shopping Cart</h2>\n\n      {cart.length === 0 ? (\n        <div className=\"bg-white rounded-xl shadow-lg p-8 text-center\">\n          <p className=\"text-gray-600 text-xl mb-4\">Your cart is empty.</p>\n          <button\n            onClick={() => navigate('products')}\n            className=\"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out\"\n          >\n            Start Shopping\n          </button>\n        </div>\n      ) : (\n        <div className=\"bg-white rounded-xl shadow-lg p-8\">\n          <div className=\"space-y-6 mb-8\">\n            {cart.map(item => (\n              <div key={item.id} className=\"flex items-center justify-between border-b pb-4 last:border-b-0 last:pb-0\">\n                <div className=\"flex items-center space-x-4\">\n                  <img\n                    src={item.imageUrl}\n                    alt={item.name}\n                    className=\"w-24 h-24 object-cover rounded-md shadow-sm\"\n                    onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/96x96/CCCCCC/000000?text=Img`; }}\n                  />\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800\">{item.name}</h3>\n                    <p className=\"text-gray-600\">${item.price.toFixed(2)} each</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-4\">\n                  <div className=\"flex items-center border border-gray-300 rounded-lg\">\n                    <button\n                      onClick={() => handleUpdateQuantity(item.id, -1)}\n                      className=\"px-3 py-1 text-gray-700 hover:bg-gray-100 rounded-l-lg\"\n                    >\n                      -\n                    </button>\n                    <span className=\"px-3 py-1 border-x border-gray-300 text-gray-800\">{item.quantity}</span>\n                    <button\n                      onClick={() => handleUpdateQuantity(item.id, 1)}\n                      className=\"px-3 py-1 text-gray-700 hover:bg-gray-100 rounded-r-lg\"\n                    >\n                      +\n                    </button>\n                  </div>\n                  <p className=\"text-lg font-bold text-purple-700 w-24 text-right\">${(item.price * item.quantity).toFixed(2)}</p>\n                  <button\n                    onClick={() => handleRemoveItem(item.id)}\n                    className=\"text-red-500 hover:text-red-700 transition duration-300\"\n                    aria-label={`Remove ${item.name}`}\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"flex justify-end items-center mt-8 pt-4 border-t-2 border-gray-200\">\n            <p className=\"text-2xl font-bold text-gray-900 mr-4\">Total:</p>\n            <p className=\"text-3xl font-extrabold text-purple-800\">${totalPrice.toFixed(2)}</p>\n          </div>\n\n          <button\n            onClick={handleCheckout}\n            className=\"w-full mt-8 bg-green-600 text-white py-4 px-6 rounded-lg text-2xl font-semibold hover:bg-green-700 transition duration-300 ease-in-out shadow-lg hover:shadow-xl\"\n          >\n            Proceed to Checkout\n          </button>\n        </div>\n      )}\n\n      {showConfirmation && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-8 rounded-xl shadow-2xl text-center max-w-sm mx-auto\">\n            <h3 className=\"text-3xl font-bold text-green-700 mb-4\">Order Confirmed!</h3>\n            <p className=\"text-gray-700 text-lg mb-6\">Thank you for your purchase. Your order has been placed successfully.</p>\n            <button\n              onClick={handleCloseConfirmation}\n              className=\"bg-blue-600 text-white py-2 px-5 rounded-lg text-lg font-semibold hover:bg-blue-700 transition duration-300\"\n            >\n              Continue Shopping\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst SimulatedSearchEnginePage = ({ navigate }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [utmSource, setUtmSource] = useState('google');\n  const [utmMedium, setUtmMedium] = useState('cpc');\n  const [utmCampaign, setUtmCampaign] = useState('summer_sale');\n\n  const handleSearch = () => {\n    if (searchTerm.trim() === '') {\n      setSearchResults([]);\n      return;\n    }\n\n    const filtered = products.filter(p =>\n      p.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      p.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      p.category.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    // Construct the base URL for the simulated ad\n    // This assumes the app is hosted at a base path like /brandazon-ecommerce/\n    // window.location.origin: e.g., https://bcaudillo.github.io\n    // window.location.pathname: e.g., /brandazon-ecommerce/\n    const baseUrl = `${window.location.origin}${window.location.pathname}`;\n\n    const resultsWithUrls = filtered.map(product => {\n      // Construct the URL with UTM parameters BEFORE the hash\n      const productUrl = `${baseUrl}?utm_source=${utmSource}&utm_medium=${utmMedium}&utm_campaign=${utmCampaign}#/product/${product.id}`;\n      return {\n        ...product,\n        simulatedUrl: productUrl\n      };\n    });\n    setSearchResults(resultsWithUrls);\n\n    // Search Results Viewed event\n    if (window.analytics) {\n      window.analytics.track('Search Results Viewed', {\n        query: searchTerm,\n        results: filtered.map(p => ({ product_id: p.id, product_name: p.name })),\n        utm_source: utmSource,\n        utm_medium: utmMedium,\n        utm_campaign: utmCampaign\n      });\n    }\n  };\n\n  const handleAdClick = (product) => {\n    // Product Clicked event (simulating ad click)\n    if (window.analytics) {\n      window.analytics.track('Product Clicked', {\n        ...formatProductForSegment(product), // Use existing formatter\n        list: 'Simulated Search Results',\n        position: searchResults.findIndex(p => p.id === product.id) + 1,\n        // Add UTMs to the event if they were part of the clicked URL\n        utm_source: utmSource,\n        utm_medium: utmMedium,\n        utm_campaign: utmCampaign\n      });\n    }\n    // Simulate navigation by changing the URL hash only.\n    // In a deployed environment, product.simulatedUrl would be used directly.\n    // In Canvas (blob: URL), we can only change the hash to avoid SecurityError.\n    const productHash = `#/product/${product.id}`;\n    window.history.pushState({}, '', productHash); // Only push the hash part\n    navigate('productDetail', product.id); // This will trigger page call with current hash\n  };\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <h2 className=\"text-4xl font-extrabold text-gray-900 mb-8 text-center\">Simulate Search Engine Ad Click</h2>\n      <div className=\"bg-white rounded-xl shadow-lg p-6 mb-8\">\n        <div className=\"flex flex-col md:flex-row gap-4 mb-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Enter search term (e.g., Labubu)\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n          />\n          <button\n            onClick={handleSearch}\n            className=\"bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 ease-in-out shadow-md\"\n          >\n            Simulate Search\n          </button>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label htmlFor=\"utmSource\" className=\"block text-gray-700 text-sm font-bold mb-2\">UTM Source:</label>\n            <input\n              type=\"text\"\n              id=\"utmSource\"\n              value={utmSource}\n              onChange={(e) => setUtmSource(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            />\n          </div>\n          <div>\n            <label htmlFor=\"utmMedium\" className=\"block text-gray-700 text-sm font-bold mb-2\">UTM Medium:</label>\n            <input\n              type=\"text\"\n              id=\"utmMedium\"\n              value={utmMedium}\n              onChange={(e) => setUtmMedium(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            />\n          </div>\n          <div>\n            <label htmlFor=\"utmCampaign\" className=\"block text-gray-700 text-sm font-bold mb-2\">UTM Campaign:</label>\n            <input\n              type=\"text\"\n              id=\"utmCampaign\"\n              value={utmCampaign}\n              onChange={(e) => setUtmCampaign(e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {searchResults.length > 0 && (\n        <div className=\"mt-8\">\n          <h3 className=\"text-2xl font-bold text-gray-800 mb-4\">Simulated Search Results (Click to Simulate Ad)</h3>\n          <div className=\"space-y-4\">\n            {searchResults.map(product => (\n              <div\n                key={product.id}\n                className=\"bg-white rounded-lg shadow-md p-4 border border-blue-200 hover:shadow-xl transition duration-300 cursor-pointer\"\n                onClick={() => handleAdClick(product)}\n              >\n                <div className=\"flex items-center space-x-4\">\n                  <img\n                    src={product.imageUrl}\n                    alt={product.name}\n                    className=\"w-20 h-20 object-cover rounded-md\"\n                    onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/80x80/CCCCCC/000000?text=Img`; }}\n                  />\n                  <div>\n                    <h4 className=\"text-xl font-semibold text-blue-700 hover:underline\">{product.name}</h4>\n                    <p className=\"text-sm text-gray-600\">{product.description}</p>\n                    <p className=\"text-xs text-green-700 mt-1\">Ad: {product.simulatedUrl}</p> {/* Display the full URL */}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n\n// --- Main App Component ---\nfunction App() {\n  const [currentPage, setCurrentPage] = useState('home');\n  const [currentProductId, setCurrentProductId] = useState(null);\n  const [cart, setCart] = useState([]);\n\n  // Function to handle navigation and Segment page calls\n  const navigate = (page, productId = null) => {\n    setCurrentPage(page);\n    setCurrentProductId(productId);\n\n    let path = '';\n    let properties = {};\n\n    switch (page) {\n      case 'home':\n        path = '/';\n        properties = { name: 'Home Page' };\n        // Product List Viewed event for Home Page (Featured Products)\n        if (window.analytics) {\n          window.analytics.track('Product List Viewed', {\n            category: 'Featured Products',\n            products: featuredProducts.map((p, index) => formatProductForSegment(p, 1, index + 1))\n          });\n        }\n        break;\n      case 'products':\n        path = '/products';\n        properties = { name: 'All Products Page' };\n        // Product List Viewed event for All Products Page\n        if (window.analytics) {\n          window.analytics.track('Product List Viewed', {\n            category: 'All Products',\n            products: products.map((p, index) => formatProductForSegment(p, 1, index + 1))\n          });\n        }\n        break;\n      case 'productDetail':\n        path = `/product/${productId}`;\n        const product = products.find(p => p.id === productId);\n        properties = { name: 'Product Detail Page', productId: productId, productName: product?.name };\n        break;\n      case 'cart':\n        path = '/cart';\n        properties = { name: 'Shopping Cart Page' };\n        // Cart Viewed event\n        if (window.analytics) {\n          window.analytics.track('Cart Viewed', {\n            cart_id: 'brandazon_cart_id', // Placeholder cart ID\n            products: cart.map(item => formatProductForSegment(item, item.quantity))\n          });\n        }\n        break;\n      case 'simulatedSearch':\n        path = '/simulated-search';\n        properties = { name: 'Simulated Search Page' };\n        break;\n      default:\n        path = '/';\n        properties = { name: 'Unknown Page' };\n    }\n\n    // Update URL hash for direct linking and browser history\n    // In a blob: URL environment (like Canvas), history.pushState/replaceState cannot\n    // change the pathname or origin. We must only modify the hash.\n    const newHash = `#${path}`;\n    window.history.pushState({}, '', newHash);\n\n\n    // Segment Page call\n    if (window.analytics) {\n      window.analytics.page(page, properties);\n    }\n  };\n\n  // Effect to handle initial page load based on URL hash\n  useEffect(() => {\n    const handleHashChange = () => {\n      const hash = window.location.hash;\n      if (hash.startsWith('#/product/')) {\n        const productId = hash.replace('#/product/', '');\n        setCurrentPage('productDetail');\n        setCurrentProductId(productId);\n        // Trigger Segment Page call for product detail on hash change\n        const product = products.find(p => p.id === productId);\n        if (window.analytics && product) {\n          window.analytics.page('productDetail', {\n            name: 'Product Detail Page',\n            productId: productId,\n            productName: product.name\n          });\n        }\n      } else if (hash === '#/products') {\n        setCurrentPage('products');\n        setCurrentProductId(null);\n        // Trigger Segment Page call for all products on hash change\n        if (window.analytics) {\n          window.analytics.page('products', { name: 'All Products Page' });\n        }\n      } else if (hash === '#/cart') {\n        setCurrentPage('cart');\n        setCurrentProductId(null);\n        // Trigger Segment Page call for cart on hash change\n        if (window.analytics) {\n          window.analytics.page('cart', { name: 'Shopping Cart Page' });\n        }\n      } else if (hash === '#/simulated-search') {\n        setCurrentPage('simulatedSearch');\n        setCurrentProductId(null);\n        // Trigger Segment Page call for simulated search on hash change\n        if (window.analytics) {\n          window.analytics.page('simulatedSearch', { name: 'Simulated Search Page' });\n        }\n      }\n      else {\n        setCurrentPage('home');\n        setCurrentProductId(null);\n        // Trigger Segment Page call for home on hash change\n        if (window.analytics) {\n          window.analytics.page('home', { name: 'Home Page' });\n        }\n      }\n    };\n\n    // Initial load\n    handleHashChange();\n\n    // Listen for hash changes\n    window.addEventListener('hashchange', handleHashChange);\n    return () => window.removeEventListener('hashchange', handleHashChange);\n  }, []); // Empty dependency array means this runs once on mount\n\n  // Segment Identify and Page calls on initial load\n  useEffect(() => {\n    if (window.analytics) {\n      // Identify call (example user)\n      window.analytics.identify('user-12345', {\n        name: 'John Doe',\n        email: 'john.doe@example.com',\n        plan: 'premium',\n        // Example custom traits\n        is_returning_customer: true,\n        last_login_at: new Date().toISOString(),\n        marketing_opt_in: true,\n        lifetime_value: 1250.75,\n        // Demographic data (example)\n        age: 30,\n        gender: 'male',\n        city: 'San Francisco',\n        country: 'USA'\n      });\n\n      // Initial page load tracking based on current route\n      // The navigate function already handles page calls, but this ensures initial load is caught\n      // if the URL already has a hash on first app render.\n      const initialHash = window.location.hash;\n      if (initialHash.startsWith('#/product/')) {\n        const productId = initialHash.replace('#/product/', '');\n        const product = products.find(p => p.id === productId);\n        window.analytics.page('productDetail', {\n          name: 'Product Detail Page',\n          productId: productId,\n          productName: product?.name\n        });\n      } else if (initialHash === '#/products') {\n        window.analytics.page('products', { name: 'All Products Page' });\n      } else if (initialHash === '#/cart') {\n        window.analytics.page('cart', { name: 'Shopping Cart Page' });\n      } else if (initialHash === '#/simulated-search') {\n        window.analytics.page('simulatedSearch', { name: 'Simulated Search Page' });\n      } else {\n        window.analytics.page('home', { name: 'Home Page' });\n      }\n\n      // Track Promotion Viewed for the banner on home page load\n      window.analytics.track('Promotion Viewed', {\n        promotion_id: 'labubu_popmart_banner_top',\n        creative: 'labubu_x_popmart_banner',\n        name: 'Labubu x Popmart Exclusive Partnership',\n        position: 'home_banner_top'\n      });\n\n      // Track Product List Viewed for the featured products on home page load\n      window.analytics.track('Product List Viewed', {\n        category: 'Featured Products',\n        products: featuredProducts.map((p, index) => formatProductForSegment(p, 1, index + 1))\n      });\n    }\n  }, []);\n\n\n  // Render the current page\n  const renderPage = () => {\n    switch (currentPage) {\n      case 'home':\n        return <HomePage navigate={navigate} />;\n      case 'products':\n        return <ProductsPage navigate={navigate} />;\n      case 'productDetail':\n        return <ProductDetailPage productId={currentProductId} navigate={navigate} />;\n      case 'cart':\n        return <CartPage navigate={navigate} />;\n      case 'simulatedSearch':\n        return <SimulatedSearchEnginePage navigate={navigate} />;\n      default:\n        return <HomePage navigate={navigate} />;\n    }\n  };\n\n  return (\n    <CartContext.Provider value={{ cart, setCart }}>\n      <div className=\"min-h-screen bg-gray-100 font-inter antialiased\">\n        {/* Tailwind CSS CDN */}\n        <script src=\"https://cdn.tailwindcss.com\"></script>\n        {/* Google Fonts - Inter */}\n        <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap\" rel=\"stylesheet\" />\n        <style>\n          {`\n            body {\n              font-family: 'Inter', sans-serif;\n            }\n          `}\n        </style>\n\n        <Header navigate={navigate} cartItemCount={cart.reduce((sum, item) => sum + item.quantity, 0)} />\n        <main className=\"py-8\">\n          {renderPage()}\n        </main>\n      </div>\n    </CartContext.Provider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}